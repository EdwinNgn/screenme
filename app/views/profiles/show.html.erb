<div class="profile">
<!-- Top profile picture and banner -->
  <div class="background-profile">
    <div class="profile-card">
      <% if !current_user.avatar.attachment.nil? %>
        <img src="<%= cl_image_path @user.avatar.key %>" />
      <% else %>
        <i class="fas fa-user-tie profil-picture"></i>
      <% end %>

      <div class="profile-card-infos">
        <h2><%= @user.email %></h2>
        <% if @user == current_user %>
          <%= link_to edit_user_registration_path(@user), class:"no-decoration" do %>
            <i class="fas fa-edit"></i>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>


  <!--  -->
  <h3 class="mt-3">Recommendations</h3>
  <div class="recommendation d-flex">
    <div class="row">
      <% @user.recommended_movies.first(3).each do |movie| %>
        <div class="col-4 mt-3">
          <%= render partial: "movies/card_id.html.erb", locals: {omdb_id: movie.omdb_id} %>
        </div>
          <%= render partial: "movies/card_collapse.html.erb", locals: {omdb_id: movie.omdb_id} %>
      <% end %>
    </div>
  </div>


  <div class="">

    <ul class="mt-4 nav nav-pills nav-fill bg-white" id="pills-tab" role="tablist">
      <li class="nav-item nav-item-profile">
        <a class="nav-link nav-link-profile active" id="pills-stats-tab" data-toggle="pill" href="#pills-stats" role="tab" aria-controls="pills-stats" aria-selected="true">Stats</a>
      </li>
      <li class="nav-item nav-item-profile">
        <a class="nav-link nav-link-profile" id="pills-to-watch-tab" data-toggle="pill" href="#pills-to-watch" role="tab" aria-controls="pills-to-watch" aria-selected="true">To watch</a>
      </li>
      <li class="nav-item nav-item-profile">
        <a class="nav-link nav-link-profile" id="pills-liked-tab" data-toggle="pill" href="#pills-liked" role="tab" aria-controls="pills-liked" aria-selected="false">Liked Movies</a>
      </li>
      <li class="nav-item nav-item-profile">
        <a class="nav-link nav-link-profile" id="pills-disliked-tab" data-toggle="pill" href="#pills-disliked" role="tab" aria-controls="pills-disliked" aria-selected="false">Disliked Movies</a>
      </li>
      <li class="nav-item nav-item-profile">
        <a class="nav-link nav-link-profile" id="pills-friends-tab" data-toggle="pill" href="#pills-friends" role="tab" aria-controls="pills-friends" aria-selected="true">Friends</a>
      </li>

    </ul>
  </div>

  <div class="tab-content" id="pills-tabContent">
    <div class="tab-pane fade show active" id="pills-stats" role="tabpanel" aria-labelledby="pills-stats-tab">
      Stats
    </div>

    <div class="tab-pane fade show" id="pills-to-watch" role="tabpanel" aria-labelledby="pills-to-watch-tab">
      To watch
    </div>

    <div class="tab-pane fade" id="pills-liked" role="tabpanel" aria-labelledby="pills-liked-tab">
      <div class="liked_movies d-flex">
        <div class="row">
          <% @user.liked_movies.first(20).each do |movie| %>
            <div class="col-4 mt-3">
              <%= movie.omdb_id %>
              <%= render partial: "movies/card_id.html.erb", locals: {omdb_id: movie.omdb_id} %>
            </div>
              <%= render partial: "movies/card_collapse.html.erb", locals: {omdb_id: movie.omdb_id} %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="pills-disliked" role="tabpanel" aria-labelledby="pills-disliked-tab">
      <div class="disliked_movies d-flex">
        <div class="row">
          <% @user.disliked_movies.first(20).each do |movie| %>
            <div class="col-4 mt-3">
              <%= render partial: "movies/card_id.html.erb", locals: {omdb_id: movie.omdb_id} %>
            </div>
              <%= render partial: "movies/card_collapse.html.erb", locals: {omdb_id: movie.omdb_id} %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="pills-friends" role="tabpanel" aria-labelledby="pills-friends-tab">
      Friends
    </div>

  </div>
</div>
